# Matcha - á»¨ng dá»¥ng Háº¹n hÃ² & Chat

<div align="center">

![Matcha Logo](https://via.placeholder.com/200x200/E91E63/FFFFFF?text=Matcha)

**á»¨ng dá»¥ng háº¹n hÃ² hiá»‡n Ä‘áº¡i vá»›i tÃ­nh nÄƒng khÃ¡m phÃ¡ thÃ´ng minh vÃ  chat realtime**

[![Flutter](https://img.shields.io/badge/Flutter-3.22+-02569B?logo=flutter)](https://flutter.dev)
[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?logo=node.js)](https://nodejs.org)
[![MongoDB](https://img.shields.io/badge/MongoDB-Atlas-47A248?logo=mongodb)](https://www.mongodb.com/cloud/atlas)
[![Firebase](https://img.shields.io/badge/Firebase-Enabled-FFCA28?logo=firebase)](https://firebase.google.com)

</div>

---

## ğŸ“± Giá»›i thiá»‡u

**Matcha** lÃ  á»©ng dá»¥ng háº¹n hÃ² Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i Flutter vÃ  Node.js, mang Ä‘áº¿n tráº£i nghiá»‡m tÃ¬m kiáº¿m báº¡n Ä‘á»i hiá»‡n Ä‘áº¡i vá»›i:

- ğŸ¯ **KhÃ¡m phÃ¡ thÃ´ng minh**: Há»‡ thá»‘ng gá»£i Ã½ dá»±a trÃªn sá»Ÿ thÃ­ch, lifestyle, khoáº£ng cÃ¡ch vÃ  Ä‘á»™ tuá»•i
- ğŸ’¬ **Chat realtime**: Nháº¯n tin tá»©c thá»i vá»›i Socket.IO
- ğŸ“ **TÃ¬m kiáº¿m theo vá»‹ trÃ­**: Lá»c ngÆ°á»i dÃ¹ng theo khoáº£ng cÃ¡ch Ä‘á»‹a lÃ½
- ğŸ¨ **UI/UX hiá»‡n Ä‘áº¡i**: Giao diá»‡n Ä‘áº¹p máº¯t, dá»… sá»­ dá»¥ng, thÃ¢n thiá»‡n vá»›i ngÆ°á»i dÃ¹ng

---

## âœ¨ TÃ­nh nÄƒng chÃ­nh

### ğŸ” XÃ¡c thá»±c & Há»“ sÆ¡

- ÄÄƒng kÃ½/ÄÄƒng nháº­p vá»›i Firebase Auth
- ÄÄƒng nháº­p báº±ng Google
- Quáº£n lÃ½ há»“ sÆ¡: áº£nh, bio, sá»Ÿ thÃ­ch, lifestyle, cÃ´ng viá»‡c, há»c váº¥n
- Chá»‰nh sá»­a áº£nh vá»›i drag & drop, tá»‘i Ä‘a 6 áº£nh

### ğŸ” KhÃ¡m phÃ¡ & Gá»£i Ã½

- **Smart Discovery**: Há»‡ thá»‘ng tÃ­nh Ä‘iá»ƒm match dá»±a trÃªn:
  - Sá»Ÿ thÃ­ch chung (interests)
  - Lifestyle tÆ°Æ¡ng Ä‘á»“ng
  - Äá»™ tuá»•i phÃ¹ há»£p
  - Khoáº£ng cÃ¡ch Ä‘á»‹a lÃ½
  - Hoáº¡t Ä‘á»™ng gáº§n Ä‘Ã¢y
- **Bá»™ lá»c nÃ¢ng cao**:
  - Äá»™ tuá»•i (min-max)
  - Khoáº£ng cÃ¡ch (km)
  - Giá»›i tÃ­nh
  - Lifestyle
  - Sá»Ÿ thÃ­ch
  - Chá»‰ hiá»ƒn thá»‹ ngÆ°á»i Ä‘ang online
- **Sáº¯p xáº¿p**: PhÃ¹ há»£p nháº¥t / Má»›i nháº¥t

### ğŸ‘† Swipe & Match

- Vuá»‘t trÃ¡i/pháº£i/lÃªn Ä‘á»ƒ pass/like/superlike
- Tá»± Ä‘á»™ng táº¡o match khi cáº£ hai cÃ¹ng like
- Hiá»ƒn thá»‹ match score (%)

### ğŸ’¬ Chat Realtime

- Nháº¯n tin tá»©c thá»i vá»›i Socket.IO
- Typing indicator
- Tráº¡ng thÃ¡i tin nháº¯n: sent, delivered, read
- Xem táº¥t cáº£ media Ä‘Ã£ gá»­i
- Push notifications

### âš™ï¸ CÃ i Ä‘áº·t

- Chá»n ngÃ´n ngá»¯
- Cháº¿ Ä‘á»™ dark/light
- Äiá»u chá»‰nh font size
- ThÃ´ng tin á»©ng dá»¥ng

---

## ğŸ“¸ Screenshots

### MÃ n hÃ¬nh ÄÄƒng nháº­p & ÄÄƒng kÃ½

<!-- Thay URL dÆ°á»›i Ä‘Ã¢y báº±ng link áº£nh chá»¥p mÃ n hÃ¬nh thá»±c táº¿ -->

![Login Screen](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Login+Screen)
*MÃ n hÃ¬nh Ä‘Äƒng nháº­p vá»›i Firebase Auth vÃ  Google Sign-In*

![Register Screen](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Register+Screen)
*MÃ n hÃ¬nh Ä‘Äƒng kÃ½ vá»›i form nháº­p thÃ´ng tin*

### MÃ n hÃ¬nh Thiáº¿t láº­p Há»“ sÆ¡

![Profile Setup](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Profile+Setup)
*Quy trÃ¬nh thiáº¿t láº­p há»“ sÆ¡: upload áº£nh, chá»n giá»›i tÃ­nh, sá»Ÿ thÃ­ch, vá»‹ trÃ­*

### MÃ n hÃ¬nh KhÃ¡m phÃ¡ (Discover)

![Discover Screen](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Discover+Screen)
*MÃ n hÃ¬nh khÃ¡m phÃ¡ vá»›i SwipeCard hiá»ƒn thá»‹ tÃªn, tuá»•i, vá»‹ trÃ­ vÃ  match score*

![Swipe Card](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Swipe+Card)
*Tháº» vuá»‘t vá»›i áº£nh profile, thÃ´ng tin cÆ¡ báº£n vÃ  cÃ¡c nÃºt action*

![Profile Detail Modal](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Profile+Detail)
*Modal chi tiáº¿t profile vá»›i carousel áº£nh vÃ  thÃ´ng tin Ä‘áº§y Ä‘á»§*

![Discovery Filters](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Filters)
*Bá»™ lá»c khÃ¡m phÃ¡: Ä‘á»™ tuá»•i, khoáº£ng cÃ¡ch, giá»›i tÃ­nh, lifestyle, sá»Ÿ thÃ­ch*

### MÃ n hÃ¬nh Match

![Matches Screen](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Matches)
*Danh sÃ¡ch cÃ¡c match Ä‘Ã£ cÃ³*

### MÃ n hÃ¬nh Chat

![Chat List](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Chat+List)
*Danh sÃ¡ch cÃ¡c cuá»™c trÃ² chuyá»‡n*

![Chat Screen](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Chat+Screen)
*MÃ n hÃ¬nh chat vá»›i tin nháº¯n realtime, typing indicator*

### MÃ n hÃ¬nh Há»“ sÆ¡

![Profile Screen](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Profile)
*MÃ n hÃ¬nh xem há»“ sÆ¡ cá»§a báº¡n*

![Edit Profile](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Edit+Profile)
*MÃ n hÃ¬nh chá»‰nh sá»­a há»“ sÆ¡ vá»›i drag & drop áº£nh*

### MÃ n hÃ¬nh CÃ i Ä‘áº·t

![Settings Screen](https://via.placeholder.com/400x800/E91E63/FFFFFF?text=Settings)
*MÃ n hÃ¬nh cÃ i Ä‘áº·t: ngÃ´n ngá»¯, theme, font size*

---

## ğŸ› ï¸ Tech Stack

### Frontend

- **Flutter** 3.22+ - Framework UI
- **Riverpod** - State management
- **GoRouter** - Navigation
- **Socket.IO Client** - Realtime communication
- **Firebase**:
  - Firebase Auth (Google Sign-In)
  - Firebase Storage (upload áº£nh)
  - Firebase Cloud Messaging (push notifications)
- **Cached Network Image** - Image loading & caching
- **Image Picker** - Chá»n áº£nh tá»« gallery

### Backend

- **Node.js** 18+ - Runtime
- **Express.js** - Web framework
- **MongoDB** + **Mongoose** - Database & ODM
- **Socket.IO** - Realtime server
- **Firebase Admin SDK** - XÃ¡c thá»±c Firebase token
- **JWT** - Authentication tokens
- **Winston** - Logging
- **Multer** - File upload handling

### Infrastructure

- **MongoDB Atlas** - Cloud database
- **Firebase** - Authentication, Storage, Messaging

---

## ğŸ“‹ YÃªu cáº§u há»‡ thá»‘ng

- **Node.js**: >= 18
- **npm**: >= 9
- **Flutter SDK**: >= 3.22
- **MongoDB**: MongoDB Atlas (khuyáº¿n nghá»‹) hoáº·c MongoDB local
- **Firebase Account**: Äá»ƒ sá»­ dá»¥ng Firebase Auth, Storage, Messaging
- **Android Studio** / **Xcode**: Äá»ƒ build mobile app

---

## ğŸš€ CÃ i Ä‘áº·t & Cháº¡y

### 1. Clone repository

```bash
git clone <repository-url> matcha
cd matcha
```

### 2. Backend Setup

```bash
cd backend
npm install
```

Táº¡o file `.env` trong thÆ° má»¥c `backend/`:



Cháº¡y backend:

```bash
npm run dev  # Development mode vá»›i nodemon
# hoáº·c
npm start    # Production mode
```

Backend sáº½ cháº¡y táº¡i `http://localhost:3000`

### 3. Frontend Setup

```bash
cd frontend
flutter pub get
```

Cáº¥u hÃ¬nh Firebase:

- Copy file `google-services.json` vÃ o `frontend/android/app/`
- Cáº¥u hÃ¬nh iOS náº¿u cáº§n (xem [Firebase Setup Guide](https://firebase.google.com/docs/flutter/setup))

Cháº¡y app:

```bash
flutter run
```

### 4. Seed dá»¯ liá»‡u (tÃ¹y chá»n)

```bash
cd backend
npm run seed
```

---

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
matcha/
â”œâ”€â”€ backend/                 # Node.js Backend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/         # Database, Firebase config
â”‚   â”‚   â”œâ”€â”€ controllers/    # Route controllers
â”‚   â”‚   â”œâ”€â”€ middleware/     # Auth, error handling, validation
â”‚   â”‚   â”œâ”€â”€ models/         # Mongoose schemas
â”‚   â”‚   â”œâ”€â”€ repositories/  # Data access layer
â”‚   â”‚   â”œâ”€â”€ routes/         # API routes
â”‚   â”‚   â”œâ”€â”€ services/       # Business logic
â”‚   â”‚   â”œâ”€â”€ utils/          # Utilities, constants
â”‚   â”‚   â”œâ”€â”€ websocket/      # Socket.IO handlers
â”‚   â”‚   â””â”€â”€ scripts/        # Database scripts
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ frontend/                # Flutter Frontend
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ core/           # Services, providers, config
â”‚   â”‚   â”œâ”€â”€ data/           # Models, repositories, providers
â”‚   â”‚   â””â”€â”€ presentation/   # Screens, widgets
â”‚   â”œâ”€â”€ assets/             # Images, data files
â”‚   â””â”€â”€ pubspec.yaml
â”‚
â””â”€â”€ docs/                    # Documentation
    â”œâ”€â”€ SETUP.md
    â”œâ”€â”€ API.md
    â”œâ”€â”€ DATABASE.md
    â””â”€â”€ PROJECT_COMPLETE.md
```

---

## ğŸ“š API Documentation

Xem chi tiáº¿t táº¡i [docs/API.md](docs/API.md)

### Endpoints chÃ­nh:

- **Auth**: `/api/auth/login/firebase`, `/api/auth/register/firebase`
- **Users**: `/api/users/profile`, `/api/users/profile/photos`, `/api/users/location`
- **Discover**: `/api/discover` (vá»›i query params: ageMin, ageMax, distance, lifestyle, interests, showMe, onlyOnline, sort)
- **Swipes**: `/api/swipes` (POST)
- **Matches**: `/api/matches`
- **Chat**: `/api/chat/rooms`, `/api/chat/rooms/:roomId/messages`
- **Upload**: `/api/upload/image`

---

## ğŸ”Œ Socket.IO Events

### Client â†’ Server:

- `join-chat-rooms` - Join táº¥t cáº£ chat rooms cá»§a user
- `join-chat-room` - Join má»™t chat room cá»¥ thá»ƒ
- `leave-chat-room` - Rá»i chat room
- `send-message` - Gá»­i tin nháº¯n
- `typing` - Typing indicator
- `mark-read` - ÄÃ¡nh dáº¥u Ä‘Ã£ Ä‘á»c

### Server â†’ Client:

- `new-message` - Tin nháº¯n má»›i
- `message-delivered` - Tin nháº¯n Ä‘Ã£ Ä‘Æ°á»£c gá»­i
- `message-read` - Tin nháº¯n Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»c
- `user-typing` - User Ä‘ang gÃµ
- `user-stopped-typing` - User dá»«ng gÃµ

---

## ğŸ§ª Testing

### Backend

```bash
cd backend
npm test
```

### Frontend

```bash
cd frontend
flutter test
```

---

## ğŸ“ Scripts há»¯u Ã­ch

### Backend

- `npm run seed` - Seed dá»¯ liá»‡u máº«u
- `node src/scripts/normalize_coordinates.js` - Chuáº©n hÃ³a tá»a Ä‘á»™ cho user cÅ©
- `node src/scripts/update_coordinates.js <userId> <lng> <lat>` - Cáº­p nháº­t tá»a Ä‘á»™ cho user

---

## ğŸ¤ Contributing

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Má»Ÿ Pull Request

---

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

---

## ğŸ‘¥ Authors

- **Your Name** - *Initial work*

---

## ğŸ™ Acknowledgments

- Flutter team
- Firebase team
- MongoDB Atlas
- Táº¥t cáº£ cÃ¡c contributors cá»§a cÃ¡c packages open source Ä‘Æ°á»£c sá»­ dá»¥ng

---

## ğŸ“ LiÃªn há»‡

- **Email**: your.email@example.com
- **GitHub**: [@yourusername](https://github.com/yourusername)

---

<div align="center">

**Made with â¤ï¸ using Flutter & Node.js**

</div>
